<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Refresh_screen</name>
        <label>Refresh screen</label>
        <locationX>1097</locationX>
        <locationY>143</locationY>
        <actionName>c:navigateToRecord</actionName>
        <actionType>component</actionType>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>recordId</assignToReference>
            <name>recordId</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Refresh_screen_0</name>
        <label>Refresh screen</label>
        <locationX>1327</locationX>
        <locationY>1317</locationY>
        <actionName>c:navigateToRecord</actionName>
        <actionType>component</actionType>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>recordId</assignToReference>
            <name>recordId</name>
        </outputParameters>
    </actionCalls>
    <assignments>
        <name>Add_Record_to_New_Collection</name>
        <label>Add Record to New Collection</label>
        <locationX>859</locationX>
        <locationY>1096</locationY>
        <assignmentItems>
            <assignToReference>AssetDetailsNOTSelectedGroup</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sObjAssetDetail</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Asset_Detail_Records_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Selected_Asset_Groups_to_Var</name>
        <label>Add Selected Asset Groups to Var</label>
        <locationX>675</locationX>
        <locationY>995</locationY>
        <assignmentItems>
            <assignToReference>vrSelectedAssetDetails</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Asset_Detail_Serial_Numbers</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Asset_Detail_Records_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fields_for_Both_Asset</name>
        <label>Assign Fields for Both Asset</label>
        <locationX>196</locationX>
        <locationY>795</locationY>
        <assignmentItems>
            <assignToReference>sObjNewAsset.Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewAssetQuantityFormula</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjNewAsset.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue/>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Lookup_Asset.Fleet_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Retirement</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Lookup_Asset.Retired_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Retired_Date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Lookup_Asset.Number_Retired__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Number_Retired</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjNewAsset.Retired_Date__c</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjNewAsset.Fleet_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vrOldAssetFleetStatus</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_New_Asset_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Null_Check</name>
        <label>Assign Null Check</label>
        <locationX>283</locationX>
        <locationY>1222</locationY>
        <assignmentItems>
            <assignToReference>vrNullCheck</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Lookup_Asset_Details_0</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Are_There_Asset_Details</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Null_Check_0</name>
        <label>Assign Null Check</label>
        <locationX>720</locationX>
        <locationY>694</locationY>
        <assignmentItems>
            <assignToReference>vrNullCheck</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Lookup_Asset_Details_0</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Are_There_Asset_Details_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_New_Asset</name>
        <label>Create New Asset</label>
        <locationX>350</locationX>
        <locationY>354</locationY>
        <assignmentItems>
            <assignToReference>sObjNewAsset</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lookup_Asset</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vrOldAssetFleetStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lookup_Asset.Fleet_Status__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_if_Asset_is_Retired</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Retire_Asset_Full</name>
        <label>Retire Asset_Full</label>
        <locationX>1139</locationX>
        <locationY>806</locationY>
        <assignmentItems>
            <assignToReference>Lookup_Asset.Retired_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Lookup_Asset.Number_Retired__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Lookup_Asset.Quantity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Lookup_Asset.Fleet_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Retirement</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Original_Asset_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Asset_on_Asset_Detail</name>
        <label>Update Asset on Asset Detail</label>
        <locationX>1124</locationX>
        <locationY>1184</locationY>
        <assignmentItems>
            <assignToReference>sObjAssetDetail.Asset_Group__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sObjNewAsset.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Record_to_New_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Asset_on_Asset_Detail_0</name>
        <label>Update Asset on Asset Detail</label>
        <locationX>1271</locationX>
        <locationY>538</locationY>
        <assignmentItems>
            <assignToReference>sObjAssetDetail.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Retired</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjAssetDetail.Retired_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Asset_Detail_Records_0_0</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>Full</name>
        <choiceText>Full</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Full</stringValue>
        </value>
    </choices>
    <choices>
        <name>Partial</name>
        <choiceText>Partial</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Partial</stringValue>
        </value>
    </choices>
    <decisions>
        <name>Are_There_Asset_Details</name>
        <label>Are There Asset Details?</label>
        <locationX>279</locationX>
        <locationY>1068</locationY>
        <defaultConnector>
            <targetReference>Update_Original_Asset</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Asset Detail Records Found</defaultConnectorLabel>
        <rules>
            <name>Asset_Detail_Records_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vrNullCheck</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Select_Asset_Details2</targetReference>
            </connector>
            <label>Asset Detail Records Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Are_There_Asset_Details_0</name>
        <label>Are There Asset Details?</label>
        <locationX>839</locationX>
        <locationY>688</locationY>
        <defaultConnector>
            <targetReference>Retire_Asset_Full</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Asset Detail Records Found</defaultConnectorLabel>
        <rules>
            <name>Asset_Detail_Records_Found_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vrNullCheck</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Through_Asset_Detail_Records_0_0</targetReference>
            </connector>
            <label>Asset Detail Records Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_Full_Retirement</name>
        <label>Check for Full Retirement</label>
        <locationX>432</locationX>
        <locationY>691</locationY>
        <defaultConnector>
            <targetReference>Assign_Fields_for_Both_Asset</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Full_Retirement</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Number_Retired</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Lookup_Asset.Quantity__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lookup_Asset_Details_Full_Retire</targetReference>
            </connector>
            <label>Full Retirement</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Asset_is_Retired</name>
        <label>Check if Asset is Retired</label>
        <locationX>175</locationX>
        <locationY>493</locationY>
        <defaultConnector>
            <targetReference>Retire_Assets</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NOT Retired</defaultConnectorLabel>
        <rules>
            <name>RetiredAsset</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Lookup_Asset.Fleet_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Retirement</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Alert</targetReference>
            </connector>
            <label>Retired</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Record_Selected</name>
        <label>Check if Record Selected</label>
        <locationX>965</locationX>
        <locationY>421</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vrSelectedAssetDetails</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>sObjAssetDetail.Id</elementReference>
                </rightValue>
            </conditions>
            <label>Selected</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Record_Selected_0</name>
        <label>Check if Record Selected</label>
        <locationX>1112</locationX>
        <locationY>959</locationY>
        <defaultConnector>
            <targetReference>Update_Asset_on_Asset_Detail</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NOT Selected</defaultConnectorLabel>
        <rules>
            <name>Selected_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vrSelectedAssetDetails</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>sObjAssetDetail.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Through_Asset_Detail_Records_0</targetReference>
            </connector>
            <label>Selected</label>
        </rules>
    </decisions>
    <decisions>
        <name>Full_or_Partial_Decision</name>
        <label>Full or Partial</label>
        <locationX>700</locationX>
        <locationY>99</locationY>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>Full_selection</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Full_or_Partial</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Full</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreateTradeInRecordforFull</targetReference>
            </connector>
            <label>Full</label>
        </rules>
        <rules>
            <name>Partial_selection</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Full_or_Partial</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Partial</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Partial_Number_for_Trade_In</targetReference>
            </connector>
            <label>Partial</label>
        </rules>
    </decisions>
    <decisions>
        <name>What_Fired_Flow</name>
        <label>What Fired Flow?</label>
        <locationX>200</locationX>
        <locationY>72</locationY>
        <defaultConnector>
            <targetReference>Lookup_Opportunity_varFields</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Retire_Asset</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>a0A</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lookup_Asset</targetReference>
            </connector>
            <label>Retire Asset</label>
        </rules>
        <rules>
            <name>Trade_In_on_Opp</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>006</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lookup_Opportunity_varFields</targetReference>
            </connector>
            <label>Trade In on Opp</label>
        </rules>
    </decisions>
    <dynamicChoiceSets>
        <name>AssetGroupDetail</name>
        <dataType>String</dataType>
        <displayField>Serial__c</displayField>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Lookup_Asset.Account__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Asset_Group__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>CC_Asset__c</object>
        <outputAssignments>
            <assignToReference>vrSerial</assignToReference>
            <field>Serial__c</field>
        </outputAssignments>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>AssetGroupList</name>
        <dataType>String</dataType>
        <displayField>Field_for_Flow__c</displayField>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varAccountId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Fleet_Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Retirement</stringValue>
            </value>
        </filters>
        <object>CC_Asset_Group__c</object>
        <outputAssignments>
            <assignToReference>varSelectedAssetGroup</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varFullQuantity</assignToReference>
            <field>Quantity__c</field>
        </outputAssignments>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <formulas>
        <name>NewAssetQuantityFormula</name>
        <dataType>Number</dataType>
        <expression>{!Lookup_Asset.Quantity__c} - {!Number_Retired}</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>Trade In Asset Selection Flow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Trade In Asset Selection Flow</label>
    <loops>
        <name>Loop_Through_Asset_Detail_Records</name>
        <label>Loop Through Asset Detail Records</label>
        <locationX>845</locationX>
        <locationY>416</locationY>
        <assignNextValueToReference>sObjAssetDetail</assignNextValueToReference>
        <collectionReference>Lookup_Asset_Details</collectionReference>
        <iterationOrder>Asc</iterationOrder>
    </loops>
    <loops>
        <name>Loop_Through_Asset_Detail_Records_0</name>
        <label>Loop Through Asset Detail Records</label>
        <locationX>791</locationX>
        <locationY>978</locationY>
        <assignNextValueToReference>sObjAssetDetail</assignNextValueToReference>
        <collectionReference>Lookup_Asset_Details_0</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_if_Record_Selected_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_UnRetired_Asset_Details</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Through_Asset_Detail_Records_0_0</name>
        <label>Loop Through Asset Detail Records</label>
        <locationX>1044</locationX>
        <locationY>587</locationY>
        <assignNextValueToReference>sObjAssetDetail</assignNextValueToReference>
        <collectionReference>Lookup_Asset_Details_Full_Retire</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Update_Asset_on_Asset_Detail_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Asset_Details</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_New_Asset_Record</name>
        <label>Create New Asset Record</label>
        <locationX>98</locationX>
        <locationY>959</locationY>
        <connector>
            <targetReference>Lookup_Asset_Details_0</targetReference>
        </connector>
        <inputReference>sObjNewAsset</inputReference>
    </recordCreates>
    <recordCreates>
        <name>CreateTradeInRecord</name>
        <label>CreateTradeInRecord</label>
        <locationX>955</locationX>
        <locationY>240</locationY>
        <assignRecordIdToReference>varTradeInID</assignRecordIdToReference>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>varAccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Asset__c</field>
            <value>
                <elementReference>varSelectedAssetGroup</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>varOpportunityID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Trade_In_Quantity__c</field>
            <value>
                <elementReference>Partial_Quantity</elementReference>
            </value>
        </inputAssignments>
        <object>CC_Trade_In__c</object>
    </recordCreates>
    <recordCreates>
        <name>CreateTradeInRecordforFull</name>
        <label>CreateTradeInRecordforFull</label>
        <locationX>940</locationX>
        <locationY>91</locationY>
        <assignRecordIdToReference>varTradeInFULLId</assignRecordIdToReference>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>varAccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Asset__c</field>
            <value>
                <elementReference>varSelectedAssetGroup</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>varOpportunityID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Trade_In_Quantity__c</field>
            <value>
                <elementReference>varFullQuantity</elementReference>
            </value>
        </inputAssignments>
        <object>CC_Trade_In__c</object>
    </recordCreates>
    <recordLookups>
        <name>Lookup_Asset</name>
        <label>Lookup Asset</label>
        <locationX>218</locationX>
        <locationY>361</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_New_Asset</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CC_Asset_Group__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Account__c</queriedFields>
        <queriedFields>Acquired_Date__c</queriedFields>
        <queriedFields>Car_Type__c</queriedFields>
        <queriedFields>CC_Asset_Group_Age__c</queriedFields>
        <queriedFields>Color__c</queriedFields>
        <queriedFields>CurrencyIsoCode</queriedFields>
        <queriedFields>Field_for_Flow__c</queriedFields>
        <queriedFields>Fleet_Status__c</queriedFields>
        <queriedFields>Fleet_Type__c</queriedFields>
        <queriedFields>Model_Year__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Number_Retired__c</queriedFields>
        <queriedFields>Order__c</queriedFields>
        <queriedFields>Product__c</queriedFields>
        <queriedFields>Quantity__c</queriedFields>
        <queriedFields>Original_Fleet_Status__c</queriedFields>
        <queriedFields>Retired_Date__c</queriedFields>
        <queriedFields>Trade_In_Comments__c</queriedFields>
        <queriedFields>Trade_In_Opportunity__c</queriedFields>
        <queriedFields>Trade_In_Ship_Date__c</queriedFields>
        <queriedFields>Vendor_Formula__c</queriedFields>
        <queriedFields>Asset_Group_Key__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Asset_Details</name>
        <label>Lookup Asset Details</label>
        <locationX>712</locationX>
        <locationY>418</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varAccountId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Asset_Group__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varSelectedAssetGroup</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>CC_Asset__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Account__c</queriedFields>
        <queriedFields>Acquired_Date__c</queriedFields>
        <queriedFields>Asset_Group__c</queriedFields>
        <queriedFields>CC_Asset_Detail_Search__c</queriedFields>
        <queriedFields>Color__c</queriedFields>
        <queriedFields>CurrencyIsoCode</queriedFields>
        <queriedFields>Decal_Number__c</queriedFields>
        <queriedFields>Model_Year__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Order__c</queriedFields>
        <queriedFields>Product__c</queriedFields>
        <queriedFields>Serial__c</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>Vendor__c</queriedFields>
        <queriedFields>Fleet_Status__c</queriedFields>
        <queriedFields>Fleet_Retired_Date__c</queriedFields>
        <queriedFields>Retired_Date__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Asset_Details_0</name>
        <label>Lookup Asset Details</label>
        <locationX>134</locationX>
        <locationY>1223</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Null_Check</targetReference>
        </connector>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Lookup_Asset.Account__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Asset_Group__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>CC_Asset__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Account__c</queriedFields>
        <queriedFields>Acquired_Date__c</queriedFields>
        <queriedFields>Asset_Group__c</queriedFields>
        <queriedFields>Color__c</queriedFields>
        <queriedFields>CurrencyIsoCode</queriedFields>
        <queriedFields>Model_Year__c</queriedFields>
        <queriedFields>Order__c</queriedFields>
        <queriedFields>Product__c</queriedFields>
        <queriedFields>Retired_Date__c</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>Serial__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Asset_Details_Full_Retire</name>
        <label>Lookup Asset Details Full Retire</label>
        <locationX>594</locationX>
        <locationY>690</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Null_Check_0</targetReference>
        </connector>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Lookup_Asset.Account__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Asset_Group__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>CC_Asset__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Account__c</queriedFields>
        <queriedFields>Acquired_Date__c</queriedFields>
        <queriedFields>Asset_Group__c</queriedFields>
        <queriedFields>Color__c</queriedFields>
        <queriedFields>CurrencyIsoCode</queriedFields>
        <queriedFields>Model_Year__c</queriedFields>
        <queriedFields>Order__c</queriedFields>
        <queriedFields>Product__c</queriedFields>
        <queriedFields>Retired_Date__c</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>Serial__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Opportunity_varFields</name>
        <label>Lookup Opportunity varFields</label>
        <locationX>426</locationX>
        <locationY>59</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Asset_Group_Selection_and_Trade_In_Creation</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputAssignments>
            <assignToReference>varAccountId</assignToReference>
            <field>AccountId</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varOpportunityID</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varOppName</assignToReference>
            <field>Name</field>
        </outputAssignments>
    </recordLookups>
    <recordUpdates>
        <name>Update_Asset_Details</name>
        <label>Update Asset Details</label>
        <locationX>1278</locationX>
        <locationY>679</locationY>
        <connector>
            <targetReference>Retire_Asset_Full</targetReference>
        </connector>
        <inputReference>Lookup_Asset_Details_Full_Retire</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Original_Asset</name>
        <label>Update Original Asset</label>
        <locationX>589</locationX>
        <locationY>1431</locationY>
        <connector>
            <targetReference>Refresh_screen_0</targetReference>
        </connector>
        <inputReference>Lookup_Asset</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Original_Asset_0</name>
        <label>Update Original Asset</label>
        <locationX>1447</locationX>
        <locationY>783</locationY>
        <connector>
            <targetReference>Refresh_screen_0</targetReference>
        </connector>
        <inputReference>Lookup_Asset</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_UnRetired_Asset_Details</name>
        <label>Update UnRetired Asset Details</label>
        <locationX>631</locationX>
        <locationY>1229</locationY>
        <connector>
            <targetReference>Update_Original_Asset</targetReference>
        </connector>
        <inputReference>AssetDetailsNOTSelectedGroup</inputReference>
    </recordUpdates>
    <screens>
        <name>Alert</name>
        <label>Alert</label>
        <locationX>543</locationX>
        <locationY>500</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>AlertText</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 16px;&quot;&gt;***This Asset has already been retired***&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Lookup_Asset.Fleet_Status__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Retirement</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Asset_Group_Selection_and_Trade_In_Creation</name>
        <label>Asset Group Selection and Trade In Creation</label>
        <locationX>552</locationX>
        <locationY>90</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Full_or_Partial_Decision</targetReference>
        </connector>
        <fields>
            <name>OpportunityName</name>
            <fieldText>&lt;DIV ALIGN=&quot;LEFT&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Opportunity Name - {!varOppName}&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Asset_Groups</name>
            <choiceReferences>AssetGroupList</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Asset Groups</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Full_or_Partial</name>
            <choiceReferences>Full</choiceReferences>
            <choiceReferences>Partial</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Full or Partial?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Partial_Number_for_Trade_In</name>
        <label>Partial Number for Trade In</label>
        <locationX>718</locationX>
        <locationY>261</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>CreateTradeInRecord</targetReference>
        </connector>
        <fields>
            <name>QuantityforSelected</name>
            <fieldText>&lt;DIV ALIGN=&quot;LEFT&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Quantity for Selected Asset Group - {!varFullQuantity}&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Partial_Quantity</name>
            <dataType>Number</dataType>
            <fieldText>Partial Quantity</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>0</scale>
            <validationRule>
                <errorMessage>&lt;DIV ALIGN=&quot;LEFT&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:16px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Please add a Partial Quantity value less than or equal to &lt;FONT COLOR=&quot;#FF0000&quot;&gt;&lt;B&gt;{!varFullQuantity}&lt;/B&gt;&lt;/FONT&gt;.&lt;/FONT&gt;&lt;/DIV&gt;</errorMessage>
                <formulaExpression>{!Partial_Quantity} &lt; {!varFullQuantity}</formulaExpression>
            </validationRule>
        </fields>
        <pausedText>&lt;DIV ALIGN=&quot;LEFT&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;&lt;/FONT&gt;&lt;/DIV&gt;</pausedText>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Retire_Assets</name>
        <label>Retire Assets</label>
        <locationX>195</locationX>
        <locationY>672</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Check_for_Full_Retirement</targetReference>
        </connector>
        <fields>
            <name>RetireAssets</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 16px;&quot;&gt;Retire Assets&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>AssetQuantity</name>
            <fieldText>&lt;p&gt;Quantity - {!Lookup_Asset.Quantity__c}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Number_Retired</name>
            <dataType>Number</dataType>
            <fieldText>Number Retired</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
            <scale>0</scale>
        </fields>
        <fields>
            <name>Retired_Date</name>
            <dataType>Date</dataType>
            <defaultValue>
                <elementReference>$Flow.CurrentDate</elementReference>
            </defaultValue>
            <fieldText>Retired Date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Select_Asset_Details2</name>
        <label>Select Asset Details</label>
        <locationX>527</locationX>
        <locationY>1001</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Add_Selected_Asset_Groups_to_Var</targetReference>
        </connector>
        <fields>
            <name>Header1</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 16px;&quot;&gt;Select the Car Numbers for Retirement&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Asset_Detail_Serial_Numbers</name>
            <choiceReferences>AssetGroupDetail</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Asset Detail Car Numbers</fieldText>
            <fieldType>MultiSelectCheckboxes</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>What_Fired_Flow</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>AssetDetailsNOTSelectedGroup</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>CC_Asset__c</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>sObjAssetDetail</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>CC_Asset__c</objectType>
    </variables>
    <variables>
        <name>sObjEmptyAsset</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>CC_Asset_Group__c</objectType>
    </variables>
    <variables>
        <name>sObjNewAsset</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>CC_Asset_Group__c</objectType>
    </variables>
    <variables>
        <name>varAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varAccountName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varFullQuantity</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>varOppName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varOpportunityID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varSelectedAssetGroup</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varSelectedAssetGroupFormulaField</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varTradeInFULLId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varTradeInID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>vrNullCheck</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vrOldAssetFleetStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vrSelectedAssetDetails</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vrSerial</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
