<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <assignments>
        <name>Assign_Base_Model</name>
        <label>Assign Base Model</label>
        <locationX>675</locationX>
        <locationY>338</locationY>
        <assignmentItems>
            <assignToReference>vrBaseModelPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sObjLineItem.TotalPrice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Line_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Country_Avg_Deviation_to_Opp</name>
        <label>Assign Country Avg Deviation to Opp</label>
        <locationX>431</locationX>
        <locationY>1361</locationY>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_Highest_Country_Avg_Deviation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sObjPDR.CountryAverageDeviationPercent__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vrDeviationProdFam</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sObjPDR.Product_Family__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Lookup_PDRs_for_Lgst_PDR_Amt</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Dealer</name>
        <label>Assign Dealer</label>
        <locationX>752</locationX>
        <locationY>179</locationY>
        <assignmentItems>
            <assignToReference>vrDealerOptions</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sObjLineItem.TotalPrice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Line_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Factory_Options</name>
        <label>Assign Factory Options</label>
        <locationX>817</locationX>
        <locationY>292</locationY>
        <assignmentItems>
            <assignToReference>vrFactoryOptions</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sObjLineItem.TotalPrice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Line_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Factory_OptionsPDR</name>
        <label>Assign Factory Options</label>
        <locationX>827</locationX>
        <locationY>1156</locationY>
        <assignmentItems>
            <assignToReference>sObjPDR.Factory_Options_Total__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sObjPDRLineItem.Total_Price__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Line_Items_PDR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Opp_Fields</name>
        <label>Assign Opp Fields</label>
        <locationX>372</locationX>
        <locationY>462</locationY>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_UnitFactoryTotal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vrBaseModelPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_FactoryOptionsTotal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vrFactoryOptions</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_ExtendedWarrantyTotal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vrWarrantyOptions</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_Dealer_Standard_Options_Total__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vrDealerOptions</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_DealerOptionsTotal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TotalDealerOptions</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Opp_Fields_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Opp_Fields_0</name>
        <label>Assign Opp Fields</label>
        <locationX>565</locationX>
        <locationY>845</locationY>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_Dealer_Custom_Options_Total__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vrDealerOptions</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Opp_Fields_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Opp_Fields_0_0</name>
        <label>Assign Opp Fields</label>
        <locationX>533</locationX>
        <locationY>470</locationY>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_DealerOptionsTotal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TotalDealerOptions</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Opp</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Opp_Fields_0_0_0</name>
        <label>Assign Opp Fields</label>
        <locationX>723</locationX>
        <locationY>845</locationY>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_DealerOptionsTotal__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TotalDealerOptions</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Opp_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Product_Family_to_Largest_PDR</name>
        <label>Assign Product Family to Largest PDR</label>
        <locationX>1027</locationX>
        <locationY>1367</locationY>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_ProductFamily__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vrAmountProdFam</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Opp_w_PDR_Info</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Product_Family_to_Most_Deviation_PDR</name>
        <label>Assign Product Family to Most Deviation PDR</label>
        <locationX>1034</locationX>
        <locationY>1507</locationY>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_ProductFamily__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vrDeviationProdFam</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Opp_w_PDR_Info</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Unit</name>
        <label>Assign Unit</label>
        <locationX>654</locationX>
        <locationY>985</locationY>
        <assignmentItems>
            <assignToReference>sObjPDR.Unit_Factory_Total__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sObjPDRLineItem.Total_Price__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Line_Items_PDR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Warranty</name>
        <label>Assign Warranty</label>
        <locationX>539</locationX>
        <locationY>301</locationY>
        <assignmentItems>
            <assignToReference>vrWarrantyOptions</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sObjLineItem.TotalPrice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Line_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_WarrantyPDR</name>
        <label>Assign Warranty</label>
        <locationX>466</locationX>
        <locationY>1230</locationY>
        <assignmentItems>
            <assignToReference>sObjPDR.Extended_Warranty_Total__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sObjPDRLineItem.Total_Price__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Line_Items_PDR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Clear_Item_Totals</name>
        <label>Clear Item Totals</label>
        <locationX>175</locationX>
        <locationY>897</locationY>
        <assignmentItems>
            <assignToReference>sObjPDR.Unit_Factory_Total__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjPDR.Factory_Options_Total__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjPDR.Dealer_Options_Total__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sObjPDR.Extended_Warranty_Total__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Lookup_PDR_Line_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Total_DCOs</name>
        <label>Total DCOs</label>
        <locationX>844</locationX>
        <locationY>680</locationY>
        <assignmentItems>
            <assignToReference>vrDealerOptions</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sObjDCO.Item_Price__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_DCOs</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Opp_with_Total_PDR</name>
        <label>Update Opp with Total PDR</label>
        <locationX>707</locationX>
        <locationY>1365</locationY>
        <assignmentItems>
            <assignToReference>sObjOpp.TK_Largest_PDR_Amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sObjPDR.Total_PDR_Value__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vrAmountProdFam</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sObjPDR.Product_Family__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Deviation_or_Amount_Greater</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_Type</name>
        <label>Check Type</label>
        <locationX>656</locationX>
        <locationY>70</locationY>
        <defaultConnector>
            <targetReference>Loop_Through_Line_Items</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Base_Product</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Type__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Base</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Base_Model</targetReference>
            </connector>
            <label>Base Product</label>
        </rules>
        <rules>
            <name>Warranty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Tab_Category__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Warranty</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Warranty</targetReference>
            </connector>
            <label>Warranty</label>
        </rules>
        <rules>
            <name>Factory_Option</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Tab_Category__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Appearance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Tab_Category__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Tanks</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Tab_Category__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Kits</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Tab_Category__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Operations</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Tab_Category__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Power</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Tab_Category__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Switches</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Factory_Options</targetReference>
            </connector>
            <label>Factory Option</label>
        </rules>
        <rules>
            <name>Dealer_Option</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sObjLineItem.TK_Product_Tab_Category__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Dealer</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Dealer</targetReference>
            </connector>
            <label>Dealer Option</label>
        </rules>
    </decisions>
    <decisions>
        <name>Deviation_or_Amount_Greater</name>
        <label>Deviation or Amount Greater</label>
        <locationX>858</locationX>
        <locationY>1431</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Deviation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CryoFormula</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>PDRAmountTier</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Product_Family_to_Most_Deviation_PDR</targetReference>
            </connector>
            <label>Deviation</label>
        </rules>
        <rules>
            <name>Amount</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CryoFormula</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>PDRAmountTier</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Product_Family_to_Largest_PDR</targetReference>
            </connector>
            <label>Amount</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opp_or_PDR_or_DCO</name>
        <label>Opp / PDR / DCO</label>
        <locationX>53</locationX>
        <locationY>371</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Opp</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vrOppOrPDR</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Opp</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lookup_Opp</targetReference>
            </connector>
            <label>Opp</label>
        </rules>
        <rules>
            <name>PDR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vrOppOrPDR</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>PDR</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lookup_PDR</targetReference>
            </connector>
            <label>PDR</label>
        </rules>
        <rules>
            <name>DCO</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vrOppOrPDR</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>DCO</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lookup_Opp_0</targetReference>
            </connector>
            <label>DCO</label>
        </rules>
    </decisions>
    <decisions>
        <name>What_Type_is_Line_Item</name>
        <label>What Type is Line Item</label>
        <locationX>557</locationX>
        <locationY>1125</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Base_Model</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sObjPDRLineItem.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Base Product</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Unit</targetReference>
            </connector>
            <label>Base Model</label>
        </rules>
        <rules>
            <name>Factory_OptionPDR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sObjPDRLineItem.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Factory Option</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Factory_OptionsPDR</targetReference>
            </connector>
            <label>Factory Option</label>
        </rules>
        <rules>
            <name>WarrantyPDR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sObjPDRLineItem.Type__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Warranty</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_WarrantyPDR</targetReference>
            </connector>
            <label>Warranty</label>
        </rules>
    </decisions>
    <formulas>
        <name>CountryDeviationTier</name>
        <dataType>Number</dataType>
        <expression>IF({!sObjPDR.CountryAverageDeviationPercent__c}&gt;(-2)&amp;&amp;{!sObjPDR.CountryAverageDeviationPercent__c}&lt;=1, 1,
IF({!sObjPDR.CountryAverageDeviationPercent__c}&gt;1&amp;&amp;{!sObjPDR.CountryAverageDeviationPercent__c}&lt;=15, 2,
IF({!sObjPDR.CountryAverageDeviationPercent__c}&gt;15, 3, 
0)))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>CryoFormula</name>
        <dataType>Number</dataType>
        <expression>IF(CONTAINS(TEXT({!sObjPDR.Product_Family__c}) , &quot;Cryo&quot;), {!CryoTier}, {!CountryDeviationTier})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>CryoTier</name>
        <dataType>Number</dataType>
        <expression>IF({!sObjPDR.CountryAverageDeviationPercent__c}&gt;0&amp;&amp;{!sObjPDR.CountryAverageDeviationPercent__c}&lt;=1, 1,
IF({!sObjPDR.CountryAverageDeviationPercent__c}&gt;1&amp;&amp;{!sObjPDR.CountryAverageDeviationPercent__c}&lt;=5, 2,
IF({!sObjPDR.CountryAverageDeviationPercent__c}&gt;5, 3,
0)))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>PDRAmountTier</name>
        <dataType>Number</dataType>
        <expression>IF({!sObjPDR.Total_PDR_Value__c}&lt;1000000, 1,
IF({!sObjPDR.Total_PDR_Value__c}&gt;=1000000&amp;&amp;{!sObjPDR.Total_PDR_Value__c}&lt;=2000000, 2,
IF({!sObjPDR.Total_PDR_Value__c}&gt;=2000000&amp;&amp;{!sObjPDR.Total_PDR_Value__c}&lt;=4000000, 3,
IF({!sObjPDR.Total_PDR_Value__c}&gt;4000000, 4,
0))))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>TotalDealerOptions</name>
        <dataType>Currency</dataType>
        <expression>{!sObjOpp.TK_Dealer_Custom_Options_Total__c}+{!sObjOpp.TK_Dealer_Standard_Options_Total__c}</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>TK PDR/SPR Field Updates {!$Flow.CurrentDateTime}</interviewLabel>
    <label>TK PDR/SPR Field Updates</label>
    <loops>
        <name>Loop_Through_DCOs</name>
        <label>Loop Through DCOs</label>
        <locationX>560</locationX>
        <locationY>681</locationY>
        <assignNextValueToReference>sObjDCO</assignNextValueToReference>
        <collectionReference>DCOCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Total_DCOs</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Assign_Opp_Fields_0</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Through_Line_Items</name>
        <label>Loop Through Line Items</label>
        <locationX>366</locationX>
        <locationY>271</locationY>
        <assignNextValueToReference>sObjLineItem</assignNextValueToReference>
        <collectionReference>OppLineItemCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_Type</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Assign_Opp_Fields</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Through_Line_Items_PDR</name>
        <label>Loop Through Line Items</label>
        <locationX>357</locationX>
        <locationY>1006</locationY>
        <assignNextValueToReference>sObjPDRLineItem</assignNextValueToReference>
        <collectionReference>PDRLineItemCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>What_Type_is_Line_Item</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_PDR</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Lookup_DCOs</name>
        <label>Lookup DCOs</label>
        <locationX>376</locationX>
        <locationY>673</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Through_DCOs</targetReference>
        </connector>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>TK_Dealer_Custom_Option__c</object>
        <outputReference>DCOCollection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>Item_Code__c</queriedFields>
        <queriedFields>Item_Description__c</queriedFields>
        <queriedFields>Item_Price__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Opp</name>
        <label>Lookup Opp</label>
        <locationX>212</locationX>
        <locationY>442</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Lookup_Opp_Line_Items</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputReference>sObjOpp</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>TKTransport_Model__c</queriedFields>
        <queriedFields>TK_UnitFactoryTotal__c</queriedFields>
        <queriedFields>TK_FactoryOptionsTotal__c</queriedFields>
        <queriedFields>TK_ExtendedWarrantyTotal__c</queriedFields>
        <queriedFields>TK_DealerOptionsTotal__c</queriedFields>
        <queriedFields>TK_Dealer_Standard_Options_Total__c</queriedFields>
        <queriedFields>TK_Dealer_Custom_Options_Total__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Opp_0</name>
        <label>Lookup Opp</label>
        <locationX>211</locationX>
        <locationY>670</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Lookup_DCOs</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputReference>sObjOpp</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>TKTransport_Model__c</queriedFields>
        <queriedFields>TK_UnitFactoryTotal__c</queriedFields>
        <queriedFields>TK_FactoryOptionsTotal__c</queriedFields>
        <queriedFields>TK_ExtendedWarrantyTotal__c</queriedFields>
        <queriedFields>TK_DealerOptionsTotal__c</queriedFields>
        <queriedFields>TK_Dealer_Standard_Options_Total__c</queriedFields>
        <queriedFields>TK_Dealer_Custom_Options_Total__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Opp_Line_Items</name>
        <label>Lookup Opp Line Items</label>
        <locationX>225</locationX>
        <locationY>271</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Through_Line_Items</targetReference>
        </connector>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>OpportunityLineItem</object>
        <outputReference>OppLineItemCollection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>TK_Product_Type__c</queriedFields>
        <queriedFields>ListPrice</queriedFields>
        <queriedFields>UnitPrice</queriedFields>
        <queriedFields>TK_Product_Tab_Category__c</queriedFields>
        <queriedFields>OpportunityId</queriedFields>
        <queriedFields>X18_Digit_Opportunity_Product_ID__c</queriedFields>
        <queriedFields>TotalPrice</queriedFields>
        <queriedFields>Quantity</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Lookup_Opp_on_PDR</name>
        <label>Lookup Opp on PDR</label>
        <locationX>154</locationX>
        <locationY>1360</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Lookup_PDRs</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>sObjPDR.Opportunity__c</elementReference>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputReference>sObjOpp</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>TK_Largest_PDR_Amount__c</queriedFields>
        <queriedFields>TK_Highest_Country_Avg_Deviation__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Lookup_PDR</name>
        <label>Lookup PDR</label>
        <locationX>69</locationX>
        <locationY>992</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Clear_Item_Totals</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>TK_Transport_PDR__c</object>
        <outputReference>sObjPDR</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Factory_Options_Total__c</queriedFields>
        <queriedFields>Unit_Factory_Total__c</queriedFields>
        <queriedFields>Extended_Warranty_Total__c</queriedFields>
        <queriedFields>Dealer_Options_Total__c</queriedFields>
        <queriedFields>Opportunity__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Lookup_PDR_Line_Items</name>
        <label>Lookup PDR Line Items</label>
        <locationX>207</locationX>
        <locationY>998</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Through_Line_Items_PDR</targetReference>
        </connector>
        <filters>
            <field>PDR__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>TK_Transport_PDR_Line_Item__c</object>
        <outputReference>PDRLineItemCollection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>List_Price__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>PDR__c</queriedFields>
        <queriedFields>Quantity__c</queriedFields>
        <queriedFields>Sub_Type__c</queriedFields>
        <queriedFields>Total_Price__c</queriedFields>
        <queriedFields>Type__c</queriedFields>
        <queriedFields>TK_Product_Family__c</queriedFields>
        <queriedFields>Sales_Price__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Lookup_PDRs</name>
        <label>Lookup PDRs</label>
        <locationX>290</locationX>
        <locationY>1355</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Country_Avg_Deviation_to_Opp</targetReference>
        </connector>
        <filters>
            <field>CountryAverageDeviationPercent__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>TK_Transport_PDR__c</object>
        <outputReference>sObjPDR</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CountryAverageDeviationPercent__c</queriedFields>
        <queriedFields>Country_Average_Deviation_Amt__c</queriedFields>
        <queriedFields>Country_Average_Price__c</queriedFields>
        <queriedFields>Opportunity__c</queriedFields>
        <queriedFields>Product_Family__c</queriedFields>
        <queriedFields>Model__c</queriedFields>
        <sortField>CountryAverageDeviationPercent__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Lookup_PDRs_for_Lgst_PDR_Amt</name>
        <label>Lookup PDRs for Lgst PDR Amt</label>
        <locationX>573</locationX>
        <locationY>1368</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Opp_with_Total_PDR</targetReference>
        </connector>
        <filters>
            <field>Total_PDR_Value__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>TK_Transport_PDR__c</object>
        <outputReference>sObjPDR</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CountryAverageDeviationPercent__c</queriedFields>
        <queriedFields>Country_Average_Deviation_Amt__c</queriedFields>
        <queriedFields>Country_Average_Price__c</queriedFields>
        <queriedFields>Total_PDR_Value__c</queriedFields>
        <queriedFields>Opportunity__c</queriedFields>
        <queriedFields>Product_Family__c</queriedFields>
        <queriedFields>Model__c</queriedFields>
        <sortField>Total_PDR_Value__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordUpdates>
        <name>Update_Opp</name>
        <label>Update Opp</label>
        <locationX>704</locationX>
        <locationY>469</locationY>
        <inputReference>sObjOpp</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opp_0</name>
        <label>Update Opp</label>
        <locationX>906</locationX>
        <locationY>842</locationY>
        <inputReference>sObjOpp</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opp_w_PDR_Info</name>
        <label>Update Opp w/PDR Info</label>
        <locationX>1225</locationX>
        <locationY>1414</locationY>
        <inputReference>sObjOpp</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_PDR</name>
        <label>Update PDR</label>
        <locationX>253</locationX>
        <locationY>1201</locationY>
        <connector>
            <targetReference>Lookup_Opp_on_PDR</targetReference>
        </connector>
        <inputReference>sObjPDR</inputReference>
    </recordUpdates>
    <startElementReference>Opp_or_PDR_or_DCO</startElementReference>
    <status>Draft</status>
    <variables>
        <name>DCOCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TK_Dealer_Custom_Option__c</objectType>
    </variables>
    <variables>
        <name>OppLineItemCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>PDRLineItemCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TK_Transport_PDR_Line_Item__c</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>sObjDCO</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TK_Dealer_Custom_Option__c</objectType>
    </variables>
    <variables>
        <name>sObjLineItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>sObjOpp</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>sObjPDR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TK_Transport_PDR__c</objectType>
    </variables>
    <variables>
        <name>sObjPDRLineItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TK_Transport_PDR_Line_Item__c</objectType>
    </variables>
    <variables>
        <name>vrAmountProdFam</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vrBaseModelPrice</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vrDealerOptions</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vrDeviationProdFam</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vrFactoryOptions</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vrOppOrPDR</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vrWarrantyOptions</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
</Flow>
