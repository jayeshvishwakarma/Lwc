<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionCalls>
        <name>Open_Quote_in_QLE</name>
        <label>Open Quote in QLE</label>
        <locationX>1222</locationX>
        <locationY>237</locationY>
        <actionName>c:loadWebPage</actionName>
        <actionType>component</actionType>
        <inputParameters>
            <name>url</name>
            <value>
                <elementReference>QLE</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <description>Allows a distributor to quickly create a quote and the opp is auto-created in the background</description>
    <dynamicChoiceSets>
        <name>Distribution_Channel</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Distribution_Channel__c</picklistField>
        <picklistObject>SBQQ__Quote__c</picklistObject>
    </dynamicChoiceSets>
    <formulas>
        <description>Sets close date to today + 30 days</description>
        <name>Close_Date</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <formulas>
        <name>ContactId</name>
        <dataType>String</dataType>
        <expression>{!$User.ContactId}</expression>
    </formulas>
    <formulas>
        <name>Distributor</name>
        <dataType>String</dataType>
        <expression>{!UserAccount}</expression>
    </formulas>
    <formulas>
        <description>Creates the opp name</description>
        <name>OppName</name>
        <dataType>String</dataType>
        <expression>&quot;Quick Quote for &quot; &amp; {!AccountID.Name} &amp;  &quot; &quot; &amp; TEXT({!Close_Date})</expression>
    </formulas>
    <formulas>
        <name>ProductAreaFullName</name>
        <dataType>String</dataType>
        <expression>CASE({!salesChannel},&quot;CH&quot;,
&quot;Clean Air &amp; Vac Sys&quot;,
&quot;CM&quot;, &quot;Compressor&quot;,
&quot;CP&quot;, &quot;Champion Compressor&quot;,
&quot;CY&quot;, &quot;LeRoi&quot;,
&quot;DI&quot;, &quot;Duroflow Industrial&quot;,
&quot;DS&quot;, &quot;DV Systems&quot;,
&quot;DT&quot;, &quot;Duroflow Truckblower&quot;,
&quot;DV&quot;, &quot;Dry bulk/Vacuum&quot;,
&quot;ER&quot;, &quot;Elmo-Rietschle&quot;,
&quot;FH&quot;, &quot;Food, Chem, Hydraulic&quot;,
&quot;GI&quot;, &quot;GD Indust. Blower&quot;,
&quot;GT&quot;, &quot;GD Truck Blower&quot;,
&quot;MK&quot;, &quot;Mako&quot;,
&quot;MV&quot;, &quot;Mobile Vacuum&quot;,
&quot;SB&quot;, &quot;Sutorbilt&quot;,
&quot;WT&quot;, &quot;Work Truck&quot;,NULL)</expression>
    </formulas>
    <formulas>
        <name>QLE</name>
        <dataType>String</dataType>
        <expression>{!$Setup.CPQ_URL__c.CPQ_URL__c} + {!QuoteID}</expression>
    </formulas>
    <formulas>
        <name>RunningUser</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>sapConfiguration</name>
        <dataType>String</dataType>
        <expression>{!UserAccountId.Id}</expression>
    </formulas>
    <interviewLabel>Quick Quote {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Quick Quote</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <description>Creates the shell opportunity for quick quote</description>
        <name>Create_Opportunity</name>
        <label>Create Opportunity</label>
        <locationX>973</locationX>
        <locationY>235</locationY>
        <assignRecordIdToReference>Opp_ID</assignRecordIdToReference>
        <connector>
            <targetReference>Create_Quote_Record</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>UserAccountId.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CloseDate</field>
            <value>
                <elementReference>Close_Date</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>End_User_Account__c</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>OppName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Product_Category__c</field>
            <value>
                <elementReference>SalesChannelFullName2</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>OppRecordType</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__QuotePricebookId__c</field>
            <value>
                <elementReference>pricebookId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Sales_Channel__c</field>
            <value>
                <elementReference>salesChannel</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>StageName</field>
            <value>
                <stringValue>Stage 1 - Qualified Lead</stringValue>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordCreates>
    <recordCreates>
        <description>Created header quote record</description>
        <name>Create_Quote_Record</name>
        <label>Create Quote Record</label>
        <locationX>1105</locationX>
        <locationY>234</locationY>
        <assignRecordIdToReference>QuoteID</assignRecordIdToReference>
        <connector>
            <targetReference>Open_Quote_in_QLE</targetReference>
        </connector>
        <inputAssignments>
            <field>Distribution_Channel__c</field>
            <value>
                <elementReference>salesChannel</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>End_Customer_Account__c</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>quoteRT</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SAP_Configuration__c</field>
            <value>
                <elementReference>sapConfiguration</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__Account__c</field>
            <value>
                <elementReference>UserAccountId.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__Opportunity2__c</field>
            <value>
                <elementReference>Opp_ID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__Primary__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>SBQQ__Quote__c</object>
    </recordCreates>
    <recordLookups>
        <name>Get_AccountID</name>
        <label>Get AccountID</label>
        <locationX>389</locationX>
        <locationY>96</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Opportunity_Record_Type</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputReference>AccountID</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>AccountNumber</queriedFields>
    </recordLookups>
    <recordLookups>
        <description>Grabs the Quick Quote record type</description>
        <name>Get_Opportunity_Record_Type</name>
        <label>Get Opportunity Record Type</label>
        <locationX>384</locationX>
        <locationY>384</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Quote_Record_Type</targetReference>
        </connector>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Sales</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Opportunity</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputAssignments>
            <assignToReference>OppRecordType</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Pricebook</name>
        <label>Get Pricebook</label>
        <locationX>852</locationX>
        <locationY>236</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_Opportunity</targetReference>
        </connector>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>salesChannel</elementReference>
            </value>
        </filters>
        <object>Pricebook2</object>
        <outputAssignments>
            <assignToReference>pricebookId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <description>This gets the quote record type we want so we don&apos;t hard code values</description>
        <name>Get_Quote_Record_Type</name>
        <label>Get Quote Record Type</label>
        <locationX>529</locationX>
        <locationY>379</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetContactInfo</targetReference>
        </connector>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Quote_Draft</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SBQQ__Quote__c</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputAssignments>
            <assignToReference>quoteRT</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>GetContactInfo</name>
        <label>GetContactInf</label>
        <locationX>511</locationX>
        <locationY>198</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_DC</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ContactId</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputAssignments>
            <assignToReference>UserAccountId.Id</assignToReference>
            <field>AccountId</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>GetSalesChannelfullName</name>
        <label>GetSalesChannelfullName</label>
        <locationX>735</locationX>
        <locationY>231</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Pricebook</targetReference>
        </connector>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>salesChannel</elementReference>
            </value>
        </filters>
        <object>Distribution_Channel__mdt</object>
        <outputAssignments>
            <assignToReference>SalesChannelFullName2</assignToReference>
            <field>Label</field>
        </outputAssignments>
    </recordLookups>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Get_AccountID</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <description>Call the Quick Order with DC as subflow to get the Distributor</description>
        <name>Get_DC</name>
        <label>Get DC</label>
        <locationX>615</locationX>
        <locationY>198</locationY>
        <connector>
            <targetReference>GetSalesChannelfullName</targetReference>
        </connector>
        <flowName>Quick_Order_with_DC</flowName>
        <outputAssignments>
            <assignToReference>salesChannel</assignToReference>
            <name>SelectedSalesChannelChoicevar</name>
        </outputAssignments>
    </subflows>
    <variables>
        <name>AccountID</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>AccountID2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>acctRecordID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>ID of newly created Opp</description>
        <name>Opp_ID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <description>Quick Quote Record Type</description>
        <name>OppRecordType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>pricebookId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Newly created Quote ID</description>
        <name>QuoteID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <description>The ID of the quote Record Type</description>
        <name>quoteRT</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>salesChannel</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>SalesChannelFullName2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>UserAccount</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>UserAccountId</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
</Flow>
