<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <formulas>
        <name>IC_Plus_Subject</name>
        <dataType>String</dataType>
        <expression>&apos;[IC]&apos;+&apos; - &apos;+{!OriginalActionItem.AI_Email_Subject__c}</expression>
    </formulas>
    <formulas>
        <name>SubjectPlusQueueName</name>
        <dataType>String</dataType>
        <expression>{!OriginalActionItem.AI_Email_Subject__c}+&apos; - &apos;+{!QueueName}</expression>
    </formulas>
    <interviewLabel>Case - Internal Case Creation From Action Item (User) {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Case - Internal Case Creation From Action Item (User)</label>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>CreateCase</name>
        <label>CreateCase</label>
        <locationX>649</locationX>
        <locationY>211</locationY>
        <assignRecordIdToReference>CaseRecordID</assignRecordIdToReference>
        <connector>
            <targetReference>UpdateRecordWithRefID</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>ParentCaseOfActionItem.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Assigned_From_Address_Picklist__c</field>
            <value>
                <elementReference>ParentCaseOfActionItem.Assigned_From_Address_Picklist__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Brand__c</field>
            <value>
                <elementReference>ParentCaseOfActionItem.Brand__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>AIOriginalEmailbodyPlusNotes</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>GDI_Department__c</field>
            <value>
                <elementReference>ParentCaseOfActionItem.GDI_Department__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>HIDDEN_Case_Number_For_Internal_Case__c</field>
            <value>
                <elementReference>OriginalActionItem.ParentId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>HIDDEN_Case_Number_for_AI_Record_for_IC__c</field>
            <value>
                <elementReference>OriginalActionItem.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>IC_Action_Item_Notes__c</field>
            <value>
                <elementReference>OriginalActionItem.AI_Action_Item_Notes_to_Include__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>IC_Acton_Item_Owner__c</field>
            <value>
                <elementReference>OriginalActionItem.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Origin</field>
            <value>
                <stringValue>Action Item</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Product_Category__c</field>
            <value>
                <elementReference>ParentCaseOfActionItem.Product_Category__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <stringValue>012j0000000L9vl</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>IC_Plus_Subject</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordCreates>
    <recordLookups>
        <name>LookupCaseRefID</name>
        <label>LookupCaseRefID</label>
        <locationX>466</locationX>
        <locationY>332</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>UpdateActionItemRecord</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CaseRecordID</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputAssignments>
            <assignToReference>NewCustomerCareDivision</assignToReference>
            <field>Customer_Care_Division__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>ICReferenceID</assignToReference>
            <field>Email_Ref_ID__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>LookupOriginalActionItemRecord</name>
        <label>LookupOriginalActionItemRecord</label>
        <locationX>462</locationX>
        <locationY>52</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LookupParentCaseInformation</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ActionItemRecordID</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputReference>OriginalActionItem</outputReference>
        <queriedFields>AI_Email_Subject__c</queriedFields>
        <queriedFields>AI_Action_Item_Notes_to_Include__c</queriedFields>
        <queriedFields>AI_Original_Email_Body__c</queriedFields>
        <queriedFields>ParentId</queriedFields>
        <queriedFields>Account_DC__c</queriedFields>
        <queriedFields>Id</queriedFields>
        <queriedFields>OwnerId</queriedFields>
        <queriedFields>AI_Action_Item_Notes_to_Include_Plain__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>LookupParentCaseInformation</name>
        <label>LookupParentCaseInformation</label>
        <locationX>648</locationX>
        <locationY>54</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>CreateCase</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>OriginalActionItem.ParentId</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputReference>ParentCaseOfActionItem</outputReference>
        <queriedFields>Brand__c</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>GDI_Department__c</queriedFields>
        <queriedFields>Product_Category__c</queriedFields>
        <queriedFields>Assigned_From_Address_Picklist__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>LookupUser</name>
        <label>LookupUser</label>
        <locationX>276</locationX>
        <locationY>53</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LookupOriginalActionItemRecord</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>UserName</elementReference>
            </value>
        </filters>
        <object>User</object>
        <outputReference>User</outputReference>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>UpdateActionItemRecord</name>
        <label>UpdateActionItemRecord</label>
        <locationX>468</locationX>
        <locationY>467</locationY>
        <connector>
            <targetReference>UpdateICCaseWithNewDepartment</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ActionItemRecordID</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>AI_Email_Subject__c</field>
            <value>
                <elementReference>SubjectPlusQueueName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>HIDDEN_Case_Number_For_Internal_Case__c</field>
            <value>
                <elementReference>CaseRecordID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>IC_Reference_ID__c</field>
            <value>
                <elementReference>ICReferenceID</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateICCaseWithNewDepartment</name>
        <label>UpdateICCaseWithNewDepartment</label>
        <locationX>641</locationX>
        <locationY>466</locationY>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CaseRecordID</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>GDI_Department__c</field>
            <value>
                <elementReference>NewCustomerCareDivision</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateRecordWithRefID</name>
        <label>UpdateRecordWithRefID</label>
        <locationX>464</locationX>
        <locationY>212</locationY>
        <connector>
            <targetReference>LookupCaseRefID</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CaseRecordID</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Action_Item_Reference_ID__c</field>
            <value>
                <elementReference>ReferenceID</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <startElementReference>LookupUser</startElementReference>
    <status>Active</status>
    <textTemplates>
        <name>AIOriginalEmailbodyPlusNotes</name>
        <text>{!OriginalActionItem.AI_Action_Item_Notes_to_Include_Plain__c}

Original Email
_______________________

{!OriginalActionItem.AI_Original_Email_Body__c}</text>
    </textTemplates>
    <variables>
        <name>ActionItemRecordID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CaseRecordID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>EmailFieldMapID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>ICReferenceID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>NewCustomerCareDivision</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>OriginalActionItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>ParentCaseOfActionItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>Queue</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Group</objectType>
    </variables>
    <variables>
        <name>QueueName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>ReferenceID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>User</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>User</objectType>
    </variables>
    <variables>
        <name>UserName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
